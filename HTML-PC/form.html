<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cargill - Home</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Compiled CSS (after you compile styles.scss) -->
    <link rel="stylesheet" href="css/theme.css">
</head>

<body>
    <header class="header">
        <div class="header__logo">
            <img src="images/graphics/logo.svg" alt="Cargill">
        </div>
        <div class="header__right">
            <div class="header-actions">
                <a href="" class="action-btn menu-btn">
                    <img src="images/icons/menu.svg" alt="Menu">
                </a>

                <a href="" class="action-btn">
                    <img src="images/icons/settings.svg" alt="Cài đặt">
                </a>

                <a href="" class="action-btn">
                    <img src="images/icons/bell.svg" alt="Thông báo">
                    <span class="badge">00+</span>

                </a>
                <div class="user-box">
                    <img src="images/icons/user.svg" alt="">
                    <span>Chào, BinhDT</span>
                </div>
            </div>

        </div>
    </header>

    <main class="main-section">
        
<section class="register-wrap">
    <!-- full-width top note / status -->
    <div class="register-top">
        <div class="open-info">
            <span class="open-label">Mở cổng đăng ký sau</span>
            <div class="open-timer" aria-hidden="true">
                <span class="dot">00</span>
                <span class="dot">00</span>
                <span class="dot">00</span>
            </div>
        </div>

    </div>

    <!-- two column panels -->
    <div class="register-container">

        <!-- LEFT: form -->
        <aside class="panel form-panel" aria-labelledby="form-title">
            <h2 id="form-title">NHẬP THÔNG TIN</h2>
            <p class="muted small"><span class="req">*</span> Bắt buộc</p>

            <form class="reg-form" novalidate>
                <div class="form-row">
                    <label for="customer">Tên khách hàng (Trại hoặc đại lý) <span class="req">*</span></label>
                    <input id="customer" name="customer" type="text" placeholder="Vui lòng nhập câu trả lời" required>
                </div>

                <div class="form-row">
                    <label for="plate">Biển số xe đăng ký <span class="req">*</span></label>
                    <input id="plate" name="plate" type="text" placeholder="VD: 30A-12345" required>
                </div>

                <div class="form-row">
                    <label for="driver">Tên lái xe (Tài xế lấy hàng) <span class="req">*</span></label>
                    <input id="driver" name="driver" type="text" placeholder="Vui lòng nhập câu trả lời" required>
                </div>

                <div class="form-row">
                    <label for="weight">Khối lượng hàng cho phép (CCD: 6500kg) <span class="req">*</span></label>
                    <input id="weight" name="weight" type="number" placeholder="Vui lòng nhập câu trả lời" required>
                </div>

                <div class="form-row">
                    <label for="phone">Số điện thoại tài xế <span class="req">*</span></label>
                    <input id="phone" name="phone" type="text" placeholder="Vui lòng nhập câu trả lời" required>
                </div>

                <div class="form-row">
                    <label for="farm">Hoàn hảo/trại</label>
                    <input id="farm" name="farm" type="text" placeholder="Vui lòng nhập câu trả lời">
                </div>

                <div class="form-actions">
                    <!-- default active -->
                    <button type="submit" class="btn btn--primary" id="submitBtn">Gửi đăng ký</button>

                    <!-- example disabled (toggle in JS if desired)
              <button type="button" class="btn btn--disabled" disabled>Gửi đăng ký</button>
              -->
                </div>
            </form>
        </aside>

        <!-- RIGHT: result -->
        <aside class="panel result-panel" aria-labelledby="result-title">
            <h2 id="result-title">KẾT QUẢ ĐĂNG KÝ</h2>

            <div class="result-note">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <path
                        d="M10.125 7.875C10.125 7.57833 10.213 7.28832 10.3778 7.04165C10.5426 6.79497 10.7769 6.60271 11.051 6.48918C11.3251 6.37565 11.6267 6.34594 11.9176 6.40382C12.2086 6.4617 12.4759 6.60456 12.6857 6.81434C12.8954 7.02412 13.0383 7.29139 13.0962 7.58236C13.1541 7.87334 13.1244 8.17494 13.0108 8.44903C12.8973 8.72311 12.705 8.95738 12.4584 9.1222C12.2117 9.28703 11.9217 9.375 11.625 9.375C11.2272 9.375 10.8456 9.21696 10.5643 8.93566C10.283 8.65436 10.125 8.27282 10.125 7.875ZM22.125 12C22.125 14.0025 21.5312 15.9601 20.4186 17.6251C19.3061 19.2902 17.7248 20.5879 15.8747 21.3543C14.0246 22.1206 11.9888 22.3211 10.0247 21.9305C8.06066 21.5398 6.25656 20.5755 4.84055 19.1595C3.42454 17.7435 2.46023 15.9393 2.06955 13.9753C1.67888 12.0112 1.87939 9.97543 2.64572 8.12533C3.41206 6.27523 4.70981 4.69392 6.37486 3.58137C8.0399 2.46882 9.99747 1.875 12 1.875C14.6844 1.87798 17.258 2.94567 19.1562 4.84383C21.0543 6.74199 22.122 9.3156 22.125 12ZM19.875 12C19.875 10.4425 19.4131 8.91992 18.5478 7.62488C17.6825 6.32985 16.4526 5.32049 15.0136 4.72445C13.5747 4.12841 11.9913 3.97246 10.4637 4.27632C8.93607 4.58017 7.53288 5.3302 6.43154 6.43153C5.3302 7.53287 4.58018 8.93606 4.27632 10.4637C3.97246 11.9913 4.12841 13.5747 4.72445 15.0136C5.32049 16.4526 6.32985 17.6825 7.62489 18.5478C8.91993 19.4131 10.4425 19.875 12 19.875C14.0879 19.8728 16.0896 19.0424 17.566 17.566C19.0424 16.0896 19.8728 14.0879 19.875 12ZM13.125 15.4387V12.375C13.125 11.8777 12.9275 11.4008 12.5758 11.0492C12.2242 10.6975 11.7473 10.5 11.25 10.5C10.9843 10.4996 10.7271 10.5932 10.5238 10.7643C10.3206 10.9354 10.1844 11.173 10.1395 11.4348C10.0946 11.6967 10.1438 11.966 10.2784 12.195C10.413 12.4241 10.6244 12.5981 10.875 12.6863V15.75C10.875 16.2473 11.0725 16.7242 11.4242 17.0758C11.7758 17.4275 12.2527 17.625 12.75 17.625C13.0157 17.6254 13.2729 17.5318 13.4762 17.3607C13.6794 17.1896 13.8156 16.952 13.8605 16.6902C13.9054 16.4283 13.8562 16.159 13.7216 15.93C13.587 15.7009 13.3756 15.5269 13.125 15.4387Z"
                        fill="#B14400" />
                </svg>
                <span>Vui lòng nhập thông tin và bấm "Gửi đăng ký"</span>
            </div>

            <div class="ticket-box" role="status" aria-live="polite">
                <div class="ticket-label">Số thứ tự của bạn:</div>
                <div class="ticket-value">---</div>
            </div>

            <div class="info-cards">
                <div class="info-card">
                    <div class="info-title">Biển số xe</div>
                    <div class="info-value">---</div>
                </div>

                <div class="info-card">
                    <div class="info-title">Số điện thoại</div>
                    <div class="info-value">---</div>
                </div>

                <div class="info-card">
                    <div class="info-title">Ngày đăng ký</div>
                    <div class="info-value">---</div>
                </div>

                <div class="info-card">
                    <div class="info-title">Thời gian</div>
                    <div class="info-value">---</div>
                </div>
            </div>

            <div class="qr-section">
                <div class="qr-label">Quét QR code để nhận tin nhắn Zalo</div>
                <div class="qr-wrap" aria-hidden="false">
                    <img src="images/graphics/qr.png" alt="QR code" />
                </div>
            </div>
        </aside>

    </div> <!-- .register-container -->

    
    </main>
    <!--FOOTER PC-->
    <footer class="footer">
        <p>CÔNG TY TNHH CARGILL VIỆT NAM - CHI NHÁNH HÀ NAM<br>
            Địa chỉ KCN Đồng Văn II, thị xã Duy Tiên, tỉnh Hà Nam<br>
            Số liên hệ hỗ trợ khách hàng: <b>0226.625.1580</b></p>
    </footer>
    <!--END FOOTER PC-->

    <!--Jquery lib-->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
    <script type="text/javascript" src="js/simple-scrollbar.min.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <!-- build:script -->
    

    
    <div class="clearfix"></div>

    <script>
        $('.open-popup-link').magnificPopup({
            type: 'inline',
            midClick: true, // Allow opening popup on middle mouse click. Always set it to true if you don't provide alternative source in href.
            mainClass: 'mfp-with-zoom',
            fixedContentPos: false,
            fixedBgPos: true,
            overflowY: 'auto',
            closeBtnInside: true,
            preloader: false,
            removalDelay: 300,
        });

       // js dropdown (cải tiến: tọa độ viewport + đo kích thước chính xác + đóng khi scroll)
$(function () {
    const container = $('<div id="dropdown-container"></div>').appendTo('body');
    let $menu = null;
    let $currentBtn = null;

    $(document).on('click', '.status-dropdown .dropdown-toggle', function (e) {
        e.stopPropagation();
        const $btn = $(this);
        const optsData = $btn.data('options'); // mảng [{text, class}]
        const options = Array.isArray(optsData) ? optsData : JSON.parse(optsData);
        const currentText = $.trim($btn.text());

        // Đóng menu cũ (nếu có)
        if ($menu) {
            $menu.remove();
            $menu = null;
        }

        $currentBtn = $btn;

        // Tạo menu + danh sách li
        $menu = $('<div class="dropdown-menu"><ul></ul></div>');
        const $ul = $menu.find('ul');

        options.forEach(opt => {
            $('<li>')
                .text(opt.text)
                .addClass(opt.class)
                .toggleClass('active', opt.text === currentText)
                .appendTo($ul);
        });

        const $actions = $('<div class="actions"></div>');
        $('<button class="cancel">Bỏ qua</button>').appendTo($actions);
        $('<button class="confirm">Xác nhận</button>').appendTo($actions);
        $menu.append($actions);
        container.append($menu);

        // --- 🔧 Tính toán vị trí dropdown (dùng viewport coords) ---
        const rect = $btn[0].getBoundingClientRect(); // viewport coordinates
        const btnHeight = rect.height;
        const winWidth = $(window).width();
        const winHeight = $(window).height();
        const paddingScreen = 15; // chừa khoảng 15px mỗi bên

        // Nếu cần dropdown có width theo wrapper .dropdown-modern (nếu tồn tại),
        // bạn có thể bỏ comment đoạn sau (mình giữ commented để KHÔNG thay đổi hành vi cũ).
        // const $modern = $btn.closest('.dropdown-modern');
        // if ($modern.length) {
        //     $menu.css('width', $modern.outerWidth());
        // }

        // Để đo chính xác kích thước (menu có thể đang display:none trong CSS),
        // ta tạm hiện menu nhưng ẩn bằng visibility để không gây flicker.
        $menu.css({
            position: 'absolute',
            left: 0,
            top: 0,
            display: 'block',
            visibility: 'hidden'
        });

        const menuWidth = $menu.outerWidth();
        const menuHeight = $menu.outerHeight();

        // Vị trí mặc định: bên dưới button (viewport coords)
        let left = rect.left;
        let top = rect.top + btnHeight;

        // Nếu dropdown tràn phải -> dịch sang trái
        if (left + menuWidth + paddingScreen > winWidth) {
            left = winWidth - menuWidth - paddingScreen;
        }

        // Nếu tràn trái -> giữ cách paddingScreen
        if (left < paddingScreen) {
            left = paddingScreen;
        }

        // Nếu tràn dưới -> bật drop-up (hiển thị phía trên button)
        if (top + menuHeight > winHeight) {
            top = rect.top - menuHeight;
            $menu.addClass('drop-up');
        } else {
            $menu.removeClass('drop-up');
        }

        // Áp vị trí cuối cùng và hiển thị menu
        $menu.css({
            left: left,
            top: top,
            visibility: 'visible' // hiện lên
        });
    });

    // Click chọn item
    $(document).on('click', '#dropdown-container .dropdown-menu li', function (e) {
        e.stopPropagation();
        $('#dropdown-container .dropdown-menu li').removeClass('active');
        $(this).addClass('active');
    });

    // Bỏ qua
    $(document).on('click', '#dropdown-container .actions .cancel', function (e) {
        e.stopPropagation();
        closeMenu();
    });

    // ✅ Xác nhận – đổi text + class cho button
    $(document).on('click', '#dropdown-container .actions .confirm', function (e) {
        e.stopPropagation();
        if ($menu && $currentBtn) {
            const $active = $menu.find('li.active');
            if ($active.length) {
                const text = $active.text();
                const cls = $active.attr('class').split(/\s+/)
                    .filter(c => c !== 'active')[0] || '';

                $currentBtn
                    .text(text)
                    .removeClass(function (_, old) {
                        return (old.match(/(^|\s)status-\S+/g) || []).join(' ');
                    })
                    .addClass(cls);
            }
        }
        closeMenu();
    });

    // Đóng menu khi click ra ngoài
    $(document).on('click', function () {
        closeMenu();
    });

    // Đóng dropdown khi scroll (nếu muốn mượt hơn, có thể debounce)
    $(window).on('scroll', function () {
        if ($menu) {
            closeMenu();
        }
    });

    function closeMenu() {
        if ($menu) {
            $menu.remove();
            $menu = null;
            $currentBtn = null;
        }
    }
});

    </script>
</body>

</html>