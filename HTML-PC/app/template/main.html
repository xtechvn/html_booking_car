<!doctype html>
<html lang="vi">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cargill - Home</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <!-- Compiled CSS (after you compile styles.scss) -->
    <link rel="stylesheet" href="css/theme.css">
</head>

<body>
    <header class="header">
        <div class="header__logo">
            <img src="images/graphics/logo.svg" alt="Cargill">
        </div>
        <div class="header__right">
            <div class="header-actions">
                <a href="" class="action-btn menu-btn">
                    <img src="images/icons/menu.svg" alt="Menu">
                </a>

                <a href="" class="action-btn">
                    <img src="images/icons/settings.svg" alt="C√†i ƒë·∫∑t">
                </a>

                <a href="" class="action-btn">
                    <img src="images/icons/bell.svg" alt="Th√¥ng b√°o">
                    <span class="badge">00+</span>

                </a>
                <div class="user-box">
                    <img src="images/icons/user.svg" alt="">
                    <span>Ch√†o, BinhDT</span>
                </div>
            </div>

        </div>
    </header>

    <main class="main-section">
        <!-- build:content -->
    </main>
    <!--FOOTER PC-->
    <footer class="footer">
        <p>C√îNG TY TNHH CARGILL VI·ªÜT NAM - CHI NH√ÅNH H√Ä NAM<br>
            ƒê·ªãa ch·ªâ KCN ƒê·ªìng VƒÉn II, th·ªã x√£ Duy Ti√™n, t·ªânh H√† Nam<br>
            S·ªë li√™n h·ªá h·ªó tr·ª£ kh√°ch h√†ng: <b>0226.625.1580</b></p>
    </footer>
    <!--END FOOTER PC-->

    <!--Jquery lib-->
    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/jquery.magnific-popup.min.js"></script>
    <script type="text/javascript" src="js/simple-scrollbar.min.js"></script>
    <script type="text/javascript" src="js/common.js"></script>
    <!-- build:script -->
    <!-- build:script2 -->
    <div class="clearfix"></div>

    <script>
        $('.open-popup-link').magnificPopup({
            type: 'inline',
            midClick: true, // Allow opening popup on middle mouse click. Always set it to true if you don't provide alternative source in href.
            mainClass: 'mfp-with-zoom',
            fixedContentPos: false,
            fixedBgPos: true,
            overflowY: 'auto',
            closeBtnInside: true,
            preloader: false,
            removalDelay: 300,
        });

       // js dropdown (c·∫£i ti·∫øn: t·ªça ƒë·ªô viewport + ƒëo k√≠ch th∆∞·ªõc ch√≠nh x√°c + ƒë√≥ng khi scroll)
$(function () {
    const container = $('<div id="dropdown-container"></div>').appendTo('body');
    let $menu = null;
    let $currentBtn = null;

    $(document).on('click', '.status-dropdown .dropdown-toggle', function (e) {
        e.stopPropagation();
        const $btn = $(this);
        const optsData = $btn.data('options'); // m·∫£ng [{text, class}]
        const options = Array.isArray(optsData) ? optsData : JSON.parse(optsData);
        const currentText = $.trim($btn.text());

        // ƒê√≥ng menu c≈© (n·∫øu c√≥)
        if ($menu) {
            $menu.remove();
            $menu = null;
        }

        $currentBtn = $btn;

        // T·∫°o menu + danh s√°ch li
        $menu = $('<div class="dropdown-menu"><ul></ul></div>');
        const $ul = $menu.find('ul');

        options.forEach(opt => {
            $('<li>')
                .text(opt.text)
                .addClass(opt.class)
                .toggleClass('active', opt.text === currentText)
                .appendTo($ul);
        });

        const $actions = $('<div class="actions"></div>');
        $('<button class="cancel">B·ªè qua</button>').appendTo($actions);
        $('<button class="confirm">X√°c nh·∫≠n</button>').appendTo($actions);
        $menu.append($actions);
        container.append($menu);

        // --- üîß T√≠nh to√°n v·ªã tr√≠ dropdown (d√πng viewport coords) ---
        const rect = $btn[0].getBoundingClientRect(); // viewport coordinates
        const btnHeight = rect.height;
        const winWidth = $(window).width();
        const winHeight = $(window).height();
        const paddingScreen = 15; // ch·ª´a kho·∫£ng 15px m·ªói b√™n

        // N·∫øu c·∫ßn dropdown c√≥ width theo wrapper .dropdown-modern (n·∫øu t·ªìn t·∫°i),
        // b·∫°n c√≥ th·ªÉ b·ªè comment ƒëo·∫°n sau (m√¨nh gi·ªØ commented ƒë·ªÉ KH√îNG thay ƒë·ªïi h√†nh vi c≈©).
        // const $modern = $btn.closest('.dropdown-modern');
        // if ($modern.length) {
        //     $menu.css('width', $modern.outerWidth());
        // }

        // ƒê·ªÉ ƒëo ch√≠nh x√°c k√≠ch th∆∞·ªõc (menu c√≥ th·ªÉ ƒëang display:none trong CSS),
        // ta t·∫°m hi·ªán menu nh∆∞ng ·∫©n b·∫±ng visibility ƒë·ªÉ kh√¥ng g√¢y flicker.
        $menu.css({
            position: 'absolute',
            left: 0,
            top: 0,
            display: 'block',
            visibility: 'hidden'
        });

        const menuWidth = $menu.outerWidth();
        const menuHeight = $menu.outerHeight();

        // V·ªã tr√≠ m·∫∑c ƒë·ªãnh: b√™n d∆∞·ªõi button (viewport coords)
        let left = rect.left;
        let top = rect.top + btnHeight;

        // N·∫øu dropdown tr√†n ph·∫£i -> d·ªãch sang tr√°i
        if (left + menuWidth + paddingScreen > winWidth) {
            left = winWidth - menuWidth - paddingScreen;
        }

        // N·∫øu tr√†n tr√°i -> gi·ªØ c√°ch paddingScreen
        if (left < paddingScreen) {
            left = paddingScreen;
        }

        // N·∫øu tr√†n d∆∞·ªõi -> b·∫≠t drop-up (hi·ªÉn th·ªã ph√≠a tr√™n button)
        if (top + menuHeight > winHeight) {
            top = rect.top - menuHeight;
            $menu.addClass('drop-up');
        } else {
            $menu.removeClass('drop-up');
        }

        // √Åp v·ªã tr√≠ cu·ªëi c√πng v√† hi·ªÉn th·ªã menu
        $menu.css({
            left: left,
            top: top,
            visibility: 'visible' // hi·ªán l√™n
        });
    });

    // Click ch·ªçn item
    $(document).on('click', '#dropdown-container .dropdown-menu li', function (e) {
        e.stopPropagation();
        $('#dropdown-container .dropdown-menu li').removeClass('active');
        $(this).addClass('active');
    });

    // B·ªè qua
    $(document).on('click', '#dropdown-container .actions .cancel', function (e) {
        e.stopPropagation();
        closeMenu();
    });

    // ‚úÖ X√°c nh·∫≠n ‚Äì ƒë·ªïi text + class cho button
    $(document).on('click', '#dropdown-container .actions .confirm', function (e) {
        e.stopPropagation();
        if ($menu && $currentBtn) {
            const $active = $menu.find('li.active');
            if ($active.length) {
                const text = $active.text();
                const cls = $active.attr('class').split(/\s+/)
                    .filter(c => c !== 'active')[0] || '';

                $currentBtn
                    .text(text)
                    .removeClass(function (_, old) {
                        return (old.match(/(^|\s)status-\S+/g) || []).join(' ');
                    })
                    .addClass(cls);
            }
        }
        closeMenu();
    });

    // ƒê√≥ng menu khi click ra ngo√†i
    $(document).on('click', function () {
        closeMenu();
    });

    // ƒê√≥ng dropdown khi scroll (n·∫øu mu·ªën m∆∞·ª£t h∆°n, c√≥ th·ªÉ debounce)
    $(window).on('scroll', function () {
        if ($menu) {
            closeMenu();
        }
    });

    function closeMenu() {
        if ($menu) {
            $menu.remove();
            $menu = null;
            $currentBtn = null;
        }
    }
});

    </script>
</body>

</html>